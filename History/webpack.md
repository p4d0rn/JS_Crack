# WebPack Intro

WebPackæ˜¯ä¸€ä¸ªåŸºäºæ¨¡å—åŒ–çš„æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥æŠŠå¼€å‘ä¸­æ‰€æœ‰çš„èµ„æºï¼ˆå›¾ç‰‡ã€jsæ–‡ä»¶ã€cssæ–‡ä»¶ç­‰ï¼‰éƒ½çœ‹æˆæ¨¡å—ï¼Œé€šè¿‡loaderï¼ˆåŠ è½½å™¨ï¼‰å’Œpluginsï¼ˆæ’ä»¶ï¼‰å¯¹èµ„æºè¿›è¡Œå¤„ç†ï¼Œæ‰“åŒ…æˆç¬¦åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„å‰ç«¯èµ„æºï¼Œæ‰€æœ‰çš„èµ„æºéƒ½æ˜¯ç”±jsæ¸²æŸ“å‡ºæ¥çš„

è‹¥ä¸€ä¸ªé¡µé¢å¤§éƒ¨åˆ†æ˜¯`script`æ ‡ç­¾æ„æˆï¼Œå¤§æ¦‚ç‡æ˜¯`webpack`æ‰“åŒ…

# Best Pratice

## Extract Snippet

ğŸ¯Targetï¼šdWdnY2Y6Ly9ycC56dmF6cmdueWYucGJ6LnBhL2JjcmEvdWJ6ci9jaGVwdW5mci12YXNi

é‡‡è´­ä¿¡æ¯åˆ†é¡µå¤„ï¼Œæ¯æ¬¡ç‚¹å‡»ä¸‹ä¸€é¡µéƒ½ä¼šå‘é€ä¸¤ä¸ªåŒ…

ç¬¬äºŒä¸ªè¿”å›åŒ…ä¸­å«æœ‰æ•°æ®

![image-20231005194056815](./../.gitbook/assets/image-20231005194056815.png)

ä½†ç¬¬äºŒä¸ªè¯·æ±‚åŒ…çš„è¯·æ±‚ä½“æ˜¯å¯†æ–‡

![image-20231005194237196](./../.gitbook/assets/image-20231005194237196.png)

ç¬¬ä¸€ä¸ªè¯·æ±‚åŒ…publicï¼Œç›²çŒœæ˜¯è¯·æ±‚å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥å»åŠ å¯†ç¬¬äºŒä¸ªè¯·æ±‚åŒ…çš„å‚æ•°

![image-20231005194320007](./../.gitbook/assets/image-20231005194320007.png)

å…¨å±€æœç´¢ç¬¬ä¸€ä¸ªè¯·æ±‚åŒ…çš„è¯·æ±‚è·¯å¾„ï¼š`open/homepage/public`

![image-20231005194612115](./../.gitbook/assets/image-20231005194612115.png)

ä¸€çœ¼switchæ§åˆ¶æµå¹³å¦åŒ–ï¼Œè°ƒè¯•å¯çŸ¥ï¼š

`t.setPublicKey(r)`çš„rå³ç¬¬ä¸€ä¸ªè¯·æ±‚åŒ…è·å–åˆ°çš„å…¬é’¥

`t.encryptLong(JSON.stringify(a))`çš„aå³çœŸå®çš„è¯·æ±‚å‚æ•°JSON

è¿™é‡Œçš„tæ˜¯ä¸ªå¤§å¤´ï¼Œçœ‹æ ·å­æ˜¯ä¸ªåŠ å¯†ç±»ï¼Œ`t = new v["a"]`ï¼Œå¾€ä¸Šæ‰¾`v`

![image-20231005195612048](./../.gitbook/assets/image-20231005195612048.png)

vè¿™ä¸ªå…¨å±€å˜é‡æ˜¯ä»`t("9816")`è·å–çš„ï¼Œè¿™é‡Œçš„tå°±æ˜¯webpackçš„åŠ è½½å™¨

ä¸€å¤§å †x(â€œyyyâ€)ä¹Ÿæ˜¯webpackçš„ç‰¹å¾

å…¨å±€æœ`9816`ï¼Œæ‰£ä¸‹æ¥

![image-20231005195924382](./../.gitbook/assets/image-20231005195924382.png)

å†æŠŠwebpackçš„å…¥å£ä»£ç ä¹Ÿæ‰£ä¸‹æ¥ï¼Œæ ¼å¼å°±æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ï¼Œå‚æ•°ä¸º({xxx:function(){...}})æˆ–([function(){...}...])

å³å‚æ•°å¯èƒ½ä¸ºå¯¹è±¡æˆ–æ•°ç»„

![image-20231005201302806](./../.gitbook/assets/image-20231005201302806.png)

è¿™é‡Œçš„gå°±æ˜¯åŠ è½½å™¨ï¼Œæˆ‘ä»¬åœ¨å¤–éƒ¨å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè‡ªæ‰§è¡Œå‡½æ•°æœ€åç»™è¿™ä¸ªå˜é‡èµ‹å€¼g

å°è¯•æ‰“å°9816è¿™ä¸ªæ–¹æ³•ï¼ŒæŠ¥é”™äº†

![image-20231005201634293](./../.gitbook/assets/image-20231005201634293.png)

è¯´æ˜è¿™ä¸ª9816æ¨¡å—è¿˜ä¾èµ–å…¶ä»–æ¨¡å—

åœ¨`v = t("9816");`å¤„ä¸‹æ–­ç‚¹ï¼Œåˆ·æ–°åå†åˆ°`return A[e].call(t.exports, t, t.exports, g)`å¤„ä¸‹æ–­ç‚¹

æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡eä¸º`9816`ï¼Œç¬¬äºŒæ¬¡ä¸º`a524`

æˆ–è€…ç›´æ¥åœ¨æºç `return A[e].call(t.exports, t, t.exports, g)`å‰é¢æ‰“å°e

![image-20231005202342370](./../.gitbook/assets/image-20231005202342370.png)

å†å»æ‰£`a524`çš„ä»£ç å³å¯

ç›®å‰çŠ¶å†µä¸‹è¿è¡Œï¼ŒæŠ¥é”™mæ‰¾ä¸åˆ°

![image-20231005202820808](./../.gitbook/assets/image-20231005202820808.png)

ç»§ç»­æ‰£ï¼Œæ¥ç€eæŠ¥é”™æ‰¾ä¸åˆ°

![image-20231005210309768](./../.gitbook/assets/image-20231005210309768.png)

eä¸­å­˜æœ‰é¡µç ä¿¡æ¯ï¼Œæ¥ç€åˆè¡¥äº†ä¸¤ä¸ªå‡½æ•°bå’Œd

ç„¶åæ˜¯`sign: f()(JSON.stringify(e))`ï¼Œæ‰¾ä¸åˆ°få‡½æ•°ï¼Œè°ƒè¯•è·Ÿè¿›f

![image-20231005211042798](./../.gitbook/assets/image-20231005211042798.png)

MD5ç®—æ³•ï¼Œå¯èƒ½æ˜¯æ ‡å‡†çš„ä¹Ÿå¯èƒ½æ˜¯é­”æ”¹çš„

ä¸åœ¨çº¿md5å¯¹æ¯”ä¸€ä¸‹ï¼Œç»“æœä¸€è‡´ï¼Œç›´æ¥ç”¨`crypto-js`

å°è£…ä¸€ä¸‹ï¼š

![image-20231005215353667](./../.gitbook/assets/image-20231005215353667.png)

æˆåŠŸï¼

![image-20231005215444383](./../.gitbook/assets/image-20231005215444383.png)

## Extract All

ä¸Šé¢ä¸€ä¸ªæ¨¡å—çš„ä¾èµ–æ¨¡å—åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æ‰‹åŠ¨æ‰£ï¼Œè‹¥ä¾èµ–æ¨¡å—æœ‰å¥½å‡ åä¸ªï¼Œä¸€ä¸ªåµŒå¥—ä¸€ä¸ªï¼Œé‚£å°±å¾ˆéº»çƒ¦äº†ã€‚

è¿™æ—¶å€™å°±è¦æŠŠæ‰€æœ‰æ¨¡å—éƒ½æ‰£ä¸‹æ¥

ğŸ¯Targetï¼šdWdnY2Y6Ly9qamoueG5hbXVoYS5wYnovc3Zlei9lcnBlaHZnLzFVSTUydH5+LnVnenk/eG49cGJ6LWVycGVodmctemJxaHlyLXJrY2Jmcg==

æ±‚èŒæ‹›è˜çš„æ¥å£å‚æ•°è¢«åŠ å¯†

![image-20231005230502769](./../.gitbook/assets/image-20231005230502769.png)

å…¨å±€æœç´¢kiv

![image-20231005230902429](./../.gitbook/assets/image-20231005230902429.png)

```js
a = M._A()
t = M.mA(r.data, {iv: a}).replace(/\//g, "_").replace(/\+/g, "-").replace(/=/g, "~");
```

å¾€ä¸Šæ‰¾Mï¼Œåˆæ˜¯é€šè¿‡åŠ è½½å™¨è·å–çš„

![image-20231005231457040](./../.gitbook/assets/image-20231005231457040.png)

ä½†è¿™ä¸ªåŠ è½½å™¨æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ²¡æœ‰ä¼ å…¥æ¨¡å—å‚æ•°

![image-20231005231737583](./../.gitbook/assets/image-20231005231737583.png)

å®é™…ä¸Šé‡Œé¢è¿˜æœ‰ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ï¼ŒåŠ è½½äº†å…¶ä»–æ–‡ä»¶çš„æ¨¡å—

![image-20231005231927813](./../.gitbook/assets/image-20231005231927813.png)

æŠŠè¿™é‡Œçš„`self`æ¢æˆ`window`ï¼Œå†åœ¨å¤–éƒ¨å®šä¹‰`window = global`

åŠ è½½å™¨æ‰£å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±è¦å»æ‰£å…¶ä»–æ¨¡å—äº†ï¼Œå…¨å±€æœ`12210: `

![image-20231005232501668](./../.gitbook/assets/image-20231005232501668.png)

æŠŠæ•´ä¸ªæ–‡ä»¶åˆ¶ä¸‹æ¥åˆ°`./module2`ï¼ŒåŒæ—¶æŠŠå¼€å¤´çš„`self.webpackChunkkz_ssr_pc = self.webpackChunkkz_ssr_pc`

ä¿®æ”¹`self`ä¸º`window`

![image-20231006002256459](./../.gitbook/assets/image-20231006002256459.png)

åˆ°æ­¤å®Œæˆè¯·æ±‚åŒ…åŠ å¯†çš„æ¨¡æ‹Ÿï¼Œé¡ºä¾¿æŠŠè¿”å›åŒ…ä¹Ÿè§£å¯†äº†ã€‚

ä¾æ—§æ˜¯é…åˆè°ƒç”¨æ ˆ+æœç´¢`JSON.parse`

![image-20231006002845757](./../.gitbook/assets/image-20231006002845757.png)

è¿™é‡Œ`e.data`å³è¿”å›çš„å¯†æ–‡ï¼Œæ¥ç€å–å‡ºä¸Šé¢çš„è¯·æ±‚å‚æ•°kivä½œä¸ºåç§»å€¼ivï¼Œè·Ÿè¿›`M.gy`å¯ä»¥å‘ç°æ˜¯AESåŠ å¯†

![image-20231006003003646](./../.gitbook/assets/image-20231006003003646.png)

ä¸è¿‡æ—¢ç„¶æˆ‘ä»¬éƒ½æ‰£ä¸‹æ¥äº†ï¼Œå°±ç›´æ¥è°ƒjså§ã€‚

![image-20231006003400104](./../.gitbook/assets/image-20231006003400104.png)

![image-20231006003432711](./../.gitbook/assets/image-20231006003432711.png)